!function(a){var b=angular.module("JavaModelo",["ng"]);b.config(["$httpProvider",function(a){a.interceptors.push("LoginInter"),a.interceptors.push("HostInter"),a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]),b.service("entidades",[function(){return{}}]),b.provider("ResourceService",[function(){function a(a,b){if(!b)return a;"string"==typeof b&&(b=b.split("."));for(var c=0;c<b.length;c++)a=a[b[c]]||(a[b[c]]={});return a}var b=this;b.defaults={contentType:"application/json-persistencia",dataPath:"data.data",size:20,page:0,url:null},this.$get=["$http","$q","context","entidades",function(c,d,e,f){function g(){this.equal="=",this.notEqual="!=",this.lowerThanOrEqualTo="<=",this.greaterThanOrEqualTo=">=",this.lowerThan="<",this.greaterThan=">",this.notLike="notlike",this.like="like",this.size=b.defaults.size,this.page=b.defaults.page,this.url=b.defaults.url,this.dataPath=b.defaults.dataPath}function h(a,b){b=b||{},this._entidadeNome=a,this.dataPath=b.dataPath||this.dataPath,this.size=b.size||this.size,this.page=b.page||this.page,this.url=b.url||this.url+"/"+this._entidadeNome}function i(a){a||(a={}),this._size=a.size||0,this._page=a.page||0,this._order=[],this._join=[],this._url=a.url||"",this._param=[],this.dataPath=a.dataPath||null}var j={headers:{"Content-Type":b.defaults.contentType}};null===b.defaults.url&&(b.defaults.url=e.services+"/persistencia"),h.prototype=new g;var k=h.prototype;k.query=function(a){a||(a={});var b=new i(this),c=a.entidades;if(c instanceof Array)for(var d in c)b.param(d,this.equal,c[d]);else for(var d in a)b.param(d,this.equal,a[d]);return b},k.post=function(a){return c.post(this.url,a,j)};var k=i.prototype;k.order=function(a){if(a instanceof Array)for(var b in a){var c=a[b];"string"==typeof c&&this._order.push(arguments[b])}else"string"==typeof a&&this._order.push(a);return this},k.size=function(a){return"number"==typeof a&&(this._size=a),this},k.page=function(a){return"number"==typeof a&&(this._page=a),this},k.join=function(a){if(a instanceof Array)for(var b in a){var c=a[b];"string"==typeof c&&this._join.push(arguments[b])}else"string"==typeof a&&this._join.push(a);return this},k.param=function(a,b,c,d,e){return a?(d?"&"!==d&&"|"!==d&&(d="|"):d="&",void 0===e?(0!==c.indexOf('"')&&0!==c.indexOf("'")&&(c='"'+c),c.lastIndexOf('"')!==c.length-1&&c.lastIndexOf("'")!==c.length-1&&(c+='"')):e&&(c='"'+c+'"'),this._param.push(a+" "+b+" "+c+d),this):null},k.get=function(){var a="";for(var b in this._param)a+=this._param[b];a=a.replace(/[&\|\s]+$/,""),a&&(a="?"+a);var d=["size="+this._size,"page="+this._page];return this._join.length>0&&d.push("join="+this._join.join(",")),this._order.length>0&&d.push("order="+this._order.join(",")),d=d.join(";"),d&&(d=";"+d),c.get(this._url+d+a,j)},k.getIn=function(b,c,d){c||(c=this._entidadeNome),c=c.split(".");var e=a(b,c.slice(0,c.length-1));c=c[c.length-1];var f=this;return this.get().then(function(b){return e[c]=a(b,f.dataPath),b})},k.put=function(a){var b="";for(var d in this._param)b+=this._param[d];b=b.replace(/[&\|\s]+$/,""),b&&(b="?"+b),c.put(this._url+b,a,j)};var l={entidade:function(a,b){return f[a]=new h(a,b),f[a]}};return l}]}]),b.provider("HostInter",[function(){var a=this;a.use=!1,a.url="",a.$get=["context",function(b){var c={request:function(c){return a.use&&(c.url=a.url+b.services+c.url),c}};return c}]}]),b.provider("LoginInter",[function(){var a=this;a.url="/login.jsp",a.ERRORCODE_LOGIN=401,a.$get=["context","$window",function(b,c){var d={response:function(d){if(d.data&&d.data.code===a.ERRORCODE_LOGIN){var e=c.location.origin;c.location=e+b.services+a.url}return d}};return d}]}]),b.provider("context",[function(){function a(a,c,d){if(!a)return"";if("string"!=typeof a)throw"To configure the context url string you must pass a string as the first parameter value.";return"undefined"==typeof c&&(c=!0),a=a.trim(),c?0!==a.indexOf("/")&&(a="/"+a):0===a.indexOf("/")&&(a=a.substring(1,a.length)),d?a.lastIndexOf("/")!==a.length-1&&(a+="/"):a.lastIndexOf("/")===a.length-1&&(a=a.substring(0,a.length-1)),b(a)}function b(a){return a.replace(/\/\/+/g,"/")}var c=this,d={root:function(){return c.context.root=a.apply(this,arguments),c.context.services=b(c.context.root+c.context.path.services),c.context.websocket=b(c.context.root+c.context.path.websocket),c},services:function(){return c.context.services=b(c.context.root+(c.context.path.services=a.apply(this,arguments))),c},websocket:function(){return c.context.websocket=b(c.context.root+(c.context.path.websocket=a.apply(this,arguments))),c},put:function(b){return c.context[b]=a.call(this,arguments[1],arguments[2],arguments[3]),c},context:{root:"",path:{}}};angular.extend(this,d),this.$get=[function(){return c.context}]}])}(window);